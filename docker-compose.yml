version: '3.4'

services:
  buildingconstructapi:
    image: ${DOCKER_REGISTRY-}buildingconstructapi
    #ports:
    #  - "5000:5000"
    expose:
    -   5000
    build:
      context: .
      dockerfile: BuildingConstructApi/Dockerfile
    #depends_on:
    #      - db
    networks:
        - app-network
  #db:
  #      image: "mcr.microsoft.com/mssql/server:2019-latest"
  #      ports:
  #        - "1455:1433"
  #      environment:
  #          MSSQL_SA_PASSWORD: Hoainam@123
  #          ACCEPT_EULA: "Y"
  #      networks:
  #          - app-network
       

  ngnix:
        image: nginx:stable-alpine
        volumes:
            #- ./nginx/nginx.conf:/etc/nginx.conf
            - ./nginx/templates:/etc/nginx/templates
            - ./certbot/conf:/etc/letsencrypt
            - ./certbot/www:/var/www/certbot
        ports:
            - 80:80
        environment:
            - NGINX_HOST =tarebo.click
        restart: unless-stopped
        depends_on:
            - buildingconstructapi
        networks:
            - app-network
  certbot:
         image: certbot/certbot
         container_name: dotnet-certbot
         restart: unless-stopped
         volumes:
            - ./certbot/conf:/etc/letsencrypt
            - ./certbot/www:/var/www/certbot
   


networks:
    app-network :
        driver: bridge




